{"ast":null,"code":"var _jsxFileName = \"/home/qasim/projects/LMS/Library_Management_system/final/frontend/src/req_books.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport './req_books.css';\nimport Sfnav from './sfnavsect';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Booksreq() {\n  _s();\n  const [booksinfo, setbooksinfo] = useState(\"\");\n  useEffect(() => {\n    console.log(\"sent\");\n    fetch(\"http://localhost:5000/reqbooks_info\").then(res => res.json()).then(data => {\n      setbooksinfo(data);\n    });\n  }, []);\n  console.log(baseURL);\n  const approval = (e, title, sid) => {\n    booksinfo.map(info => {\n      const state = e.target.textContent;\n      console.log(state);\n      if (info.book_title === title && info.requested_by === sid) {\n        fetch(`http://localhost:5000/${state}`, {\n          method: 'POST',\n          headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            firstParam: title,\n            secondParam: sid\n          })\n        }).then(res => res.json()).then(data => {\n          setbooksinfo(data);\n        });\n      }\n    });\n  };\n\n  // const rejection=(title,sid)=>{\n  //   booksinfo.map((info)=> {\n  //     if (info.book_title === title && info.requested_by === sid){\n  //         fetch('http://localhost:5000/rejectbook', {  \n  //         method: 'POST',\n  //         headers: {\n  //           'Accept': 'application/json',\n  //           'Content-Type': 'application/json',\n  //         },\n  //         body: JSON.stringify({\n  //           firstParam: title,\n  //           secondParam: sid,\n  //       })}).then((res)=>res.json())\n  //       .then((data)=>{  \n  //       setbooksinfo(data)\n  //     })}\n\n  //   } )\n  // }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      marginTop: \"50px\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(Sfnav, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      style: {\n        textAlign: \"center\"\n      },\n      children: \"Requested Books list \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n      id: \"table\",\n      children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n        children: [/*#__PURE__*/_jsxDEV(\"th\", {\n          children: \"Book Title\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n          children: \"Reuqested by\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n          children: \"Author\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n          children: \"Edition\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n          children: \"Approval\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 13\n      }, this), booksinfo && booksinfo.map((info, key) => {\n        return /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            children: [info.book_title, \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: [info.campus_id, \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: [info.author, \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: info.edition\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: [info.status, \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: event => approval(event, info.book_title, info.requested_by),\n              children: info.status === \"confirmed\" ? \"Reject\" : \"Approve\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 21\n          }, this)]\n        }, key, true, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 19\n        }, this);\n      })]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 5\n  }, this);\n}\n_s(Booksreq, \"fcw61p9B84TDgxi3DPFsSxIHC4I=\");\n_c = Booksreq;\nexport default Booksreq;\nvar _c;\n$RefreshReg$(_c, \"Booksreq\");","map":{"version":3,"names":["React","useEffect","useState","Sfnav","Booksreq","booksinfo","setbooksinfo","console","log","fetch","then","res","json","data","baseURL","approval","e","title","sid","map","info","state","target","textContent","book_title","requested_by","method","headers","body","JSON","stringify","firstParam","secondParam","marginTop","textAlign","key","campus_id","author","edition","status","event"],"sources":["/home/qasim/projects/LMS/Library_Management_system/final/frontend/src/req_books.js"],"sourcesContent":["import React, { useEffect, useState} from 'react'\nimport './req_books.css'\nimport Sfnav from './sfnavsect'\n\n\nfunction Booksreq() {\n  const [booksinfo, setbooksinfo]= useState(\"\")\n\n  useEffect(()=>{\n  console.log(\"sent\")\n  fetch(\"http://localhost:5000/reqbooks_info\")\n  .then((res)=>res.json())\n  .then((data)=>{  \n      setbooksinfo(data)\n  })\n  },[])\n\n  console.log(baseURL)\n  const approval=(e,title,sid)=>{\n    booksinfo.map((info)=> {\n      const state=e.target.textContent\n      console.log(state)\n      if (info.book_title === title && info.requested_by === sid){\n          fetch(`http://localhost:5000/${state}`, {  \n          method: 'POST',\n          headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify({\n            firstParam: title,\n            secondParam: sid,\n        })}).then((res)=>res.json())\n        .then((data)=>{  \n        setbooksinfo(data)\n      })}\n      \n    } )\n  }\n\n  // const rejection=(title,sid)=>{\n  //   booksinfo.map((info)=> {\n  //     if (info.book_title === title && info.requested_by === sid){\n  //         fetch('http://localhost:5000/rejectbook', {  \n  //         method: 'POST',\n  //         headers: {\n  //           'Accept': 'application/json',\n  //           'Content-Type': 'application/json',\n  //         },\n  //         body: JSON.stringify({\n  //           firstParam: title,\n  //           secondParam: sid,\n  //       })}).then((res)=>res.json())\n  //       .then((data)=>{  \n  //       setbooksinfo(data)\n  //     })}\n      \n  //   } )\n  // }\n\n  return (\n    <div style={{marginTop:\"50px\"}}>\n    <Sfnav></Sfnav>\n      <h1 style={{textAlign: \"center\"}}>Requested Books list </h1>\n        <table id='table'>\n            <tr>\n              <th>Book Title</th>\n              <th>Reuqested by</th>\n              <th>Author</th>\n              <th>Edition</th>\n              <th>Approval</th>\n            </tr>\n              \n              {booksinfo && booksinfo.map((info, key)=>{\n                return ( \n                  <tr key={key}>\n                    <td>{info.book_title} </td>\n                    <td>{info.campus_id} </td>\n                    <td>{info.author} </td>\n                    <td>{info.edition}</td>\n                    <td>{info.status} </td>\n                    <td><button onClick={(event)=> approval(event,info.book_title,info.requested_by)}>{info.status ===\"confirmed\"?\"Reject\":\"Approve\"}</button></td>\n                    {/* <td><button onClick={()=> rejection(info.book_title,info.requested_by)}>Reject</button></td> */}\n                  </tr>\n                 )\n              })}\n             \n        </table>\n    </div>\n    \n  )\n}\n\nexport default Booksreq"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAO,OAAO;AACjD,OAAO,iBAAiB;AACxB,OAAOC,KAAK,MAAM,aAAa;AAAA;AAG/B,SAASC,QAAQ,GAAG;EAAA;EAClB,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAEJ,QAAQ,CAAC,EAAE,CAAC;EAE7CD,SAAS,CAAC,MAAI;IACdM,OAAO,CAACC,GAAG,CAAC,MAAM,CAAC;IACnBC,KAAK,CAAC,qCAAqC,CAAC,CAC3CC,IAAI,CAAEC,GAAG,IAAGA,GAAG,CAACC,IAAI,EAAE,CAAC,CACvBF,IAAI,CAAEG,IAAI,IAAG;MACVP,YAAY,CAACO,IAAI,CAAC;IACtB,CAAC,CAAC;EACF,CAAC,EAAC,EAAE,CAAC;EAELN,OAAO,CAACC,GAAG,CAACM,OAAO,CAAC;EACpB,MAAMC,QAAQ,GAAC,CAACC,CAAC,EAACC,KAAK,EAACC,GAAG,KAAG;IAC5Bb,SAAS,CAACc,GAAG,CAAEC,IAAI,IAAI;MACrB,MAAMC,KAAK,GAACL,CAAC,CAACM,MAAM,CAACC,WAAW;MAChChB,OAAO,CAACC,GAAG,CAACa,KAAK,CAAC;MAClB,IAAID,IAAI,CAACI,UAAU,KAAKP,KAAK,IAAIG,IAAI,CAACK,YAAY,KAAKP,GAAG,EAAC;QACvDT,KAAK,CAAE,yBAAwBY,KAAM,EAAC,EAAE;UACxCK,MAAM,EAAE,MAAM;UACdC,OAAO,EAAE;YACP,QAAQ,EAAE,kBAAkB;YAC5B,cAAc,EAAE;UAClB,CAAC;UACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;YACnBC,UAAU,EAAEd,KAAK;YACjBe,WAAW,EAAEd;UACjB,CAAC;QAAC,CAAC,CAAC,CAACR,IAAI,CAAEC,GAAG,IAAGA,GAAG,CAACC,IAAI,EAAE,CAAC,CAC3BF,IAAI,CAAEG,IAAI,IAAG;UACdP,YAAY,CAACO,IAAI,CAAC;QACpB,CAAC,CAAC;MAAA;IAEJ,CAAC,CAAE;EACL,CAAC;;EAED;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;;EAEA,oBACE;IAAK,KAAK,EAAE;MAACoB,SAAS,EAAC;IAAM,CAAE;IAAA,wBAC/B,QAAC,KAAK;MAAA;MAAA;MAAA;IAAA,QAAS,eACb;MAAI,KAAK,EAAE;QAACC,SAAS,EAAE;MAAQ,CAAE;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QAA2B,eAC1D;MAAO,EAAE,EAAC,OAAO;MAAA,wBACb;QAAA,wBACE;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QAAmB,eACnB;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QAAqB,eACrB;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QAAe,eACf;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QAAgB,eAChB;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QAAiB;MAAA;QAAA;QAAA;QAAA;MAAA,QACd,EAEF7B,SAAS,IAAIA,SAAS,CAACc,GAAG,CAAC,CAACC,IAAI,EAAEe,GAAG,KAAG;QACvC,oBACE;UAAA,wBACE;YAAA,WAAKf,IAAI,CAACI,UAAU;UAAA;YAAA;YAAA;YAAA;UAAA,QAAO,eAC3B;YAAA,WAAKJ,IAAI,CAACgB,SAAS;UAAA;YAAA;YAAA;YAAA;UAAA,QAAO,eAC1B;YAAA,WAAKhB,IAAI,CAACiB,MAAM;UAAA;YAAA;YAAA;YAAA;UAAA,QAAO,eACvB;YAAA,UAAKjB,IAAI,CAACkB;UAAO;YAAA;YAAA;YAAA;UAAA,QAAM,eACvB;YAAA,WAAKlB,IAAI,CAACmB,MAAM;UAAA;YAAA;YAAA;YAAA;UAAA,QAAO,eACvB;YAAA,uBAAI;cAAQ,OAAO,EAAGC,KAAK,IAAIzB,QAAQ,CAACyB,KAAK,EAACpB,IAAI,CAACI,UAAU,EAACJ,IAAI,CAACK,YAAY,CAAE;cAAA,UAAEL,IAAI,CAACmB,MAAM,KAAI,WAAW,GAAC,QAAQ,GAAC;YAAS;cAAA;cAAA;cAAA;YAAA;UAAU;YAAA;YAAA;YAAA;UAAA,QAAK;QAAA,GANxIJ,GAAG;UAAA;UAAA;UAAA;QAAA,QAQP;MAET,CAAC,CAAC;IAAA;MAAA;MAAA;MAAA;IAAA,QAEA;EAAA;IAAA;IAAA;IAAA;EAAA,QACN;AAGV;AAAC,GAtFQ/B,QAAQ;AAAA,KAARA,QAAQ;AAwFjB,eAAeA,QAAQ;AAAA;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}